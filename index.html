<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RJ Papad Loyalty Wallet</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #fff8dc;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #d2691e;
    }
    .container {
      background: #ffffff;
      max-width: 400px;
      margin: 30px auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
    }
    input {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #ffb300;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h1>ü™ô RJ Papad Loyalty Wallet</h1>
  <div class="container">
    <h3>‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç (Mobile Number ‡§∏‡•á)</h3>
    <input type="text" id="user_name" placeholder="‡§®‡§æ‡§Æ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)">
    <input type="text" id="user_mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø)">
    <button onclick="registerUser()">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
  </div>

  <p id="message"></p>

  <!-- ‡§®‡•Ä‡§ö‡•á Auto Save ‡§ï‡§æ Script ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
  <script>
    // === RJ Papad Loyalty Wallet Auto Save ===

    // üîó ‡§Ö‡§™‡§®‡§æ Apps Script Web App URL ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç üëá
    const SHEET_WEBHOOK_URL = "https://script.google.com/macros/s/PUT_YOUR_SCRIPT_URL_HERE/exec";  
    const SHEET_SECRET = "rj_secret_2025_xyz"; // ‡§µ‡§π‡•Ä ‡§ú‡•ã ‡§Ü‡§™‡§®‡•á Apps Script ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡§æ ‡§•‡§æ

    // ‡§Ø‡§π function Google Sheet ‡§Æ‡•á‡§Ç ‡§°‡•á‡§ü‡§æ ‡§≠‡•á‡§ú‡•á‡§ó‡§æ
    async function saveToGoogleSheet(action, user_mobile, user_name, joined_mobile, joined_name, language, points, client_id, note) {
      const data = {
        secret: SHEET_SECRET,
        action,
        user_mobile,
        user_name,
        joined_mobile,
        joined_name,
        language,
        points,
        client_id,
        note
      };

      try {
        const response = await fetch(SHEET_WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        if (result.success) {
          console.log("‚úÖ ‡§°‡•á‡§ü‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï Sheet ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ!");
          document.getElementById("message").innerHTML = "‚úÖ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§∏‡§´‡§≤!";
        } else {
          console.error("‚ùå Error:", result.error);
          document.getElementById("message").innerHTML = "‚ùå Error: " + result.error;
        }
      } catch (err) {
        console.error("üö´ Fetch Error:", err);
        document.getElementById("message").innerHTML = "‚ö†Ô∏è ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø!";
      }
    }

    // ‡§Ø‡§π function Register ‡§¨‡§ü‡§® ‡§∏‡•á trigger ‡§π‡•ã‡§ó‡§æ
    function registerUser() {
      const user_name = document.getElementById("user_name").value.trim();
      const user_mobile = document.getElementById("user_mobile").value.trim();

      if (user_mobile === "") {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç!");
        return;
      }

      saveToGoogleSheet("register", user_mobile, user_name, "", "", "Hindi", 0, "CUST" + Math.floor(Math.random() * 10000), "New Registration");
    }
  </script>
</body>
</html>
