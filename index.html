<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RJ рдкрд╛рдкрдбрд╝ тАФ Login first тЖТ Register if needed</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{height:100%;width:100%;font-family:'Noto Sans Devanagari',sans-serif;background:#fff8e1;color:#222;overflow-x:hidden}
  .center{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:12px}
  .card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);max-width:420px;width:100%}
  input{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:6px;font-size:15px}
  button{background:#ffc107;border:none;padding:10px 16px;border-radius:8px;font-weight:700;cursor:pointer;width:100%}
  button.secondary{background:#eee;color:#111;width:auto;padding:8px 12px;margin-top:8px}
  button:hover{opacity:0.98}
  h1{color:#c47f00;margin-bottom:10px}
  .banner{width:100%;margin:10px 0;border-radius:0;display:block}
  #notify{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);background:#4CAF50;color:#fff;padding:10px 18px;border-radius:30px;font-weight:600;transition:all 0.45s ease;z-index:9999}
  #notify.show{bottom:20px}
  .topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;background:rgba(255,255,255,0.9);position:sticky;top:0;box-shadow:0 1px 6px rgba(0,0,0,0.06);z-index:20}
  .logout-btn{background:#f44336;color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  .logout-btn:hover{opacity:0.95}
  footer{text-align:center;color:#666;margin:18px 0;font-size:13px}
</style>
</head>
<body>

<div id="notify">тЬЕ</div>

<!-- LOGIN PAGE (shown first) -->
<div id="loginPage" class="center">
  <div class="card">
    <h1>рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ</h1>
    <input id="loginMobile" type="tel" placeholder="рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ">
    <button id="loginBtn">ЁЯФУ рд▓реЙрдЧрд┐рди</button>
  </div>
</div>

<!-- REGISTER PAGE (shown when number not found) -->
<div id="registerPage" class="center" style="display:none;">
  <div class="card">
    <h1>рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ</h1>
    <input id="regName" type="text" placeholder="рдирд╛рдо / Name">
    <input id="regMobile" type="tel" placeholder="рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ (рдкрд╣рд▓реЗ рд╕реЗ рднрд░рд╛ рд╣реЛрдЧрд╛)">
    <button id="regSaveBtn">ЁЯТ╛ рд╕реЗрд╡ рдХрд░реЗрдВ</button>
    <button class="secondary" id="backToLoginBtn">тЖР рд╡рд╛рдкрд╕ рд▓реЙрдЧрд┐рди рдкреЗрдЬ</button>
  </div>
</div>

<!-- MAIN SITE (opens when login success) -->
<div id="mainSite" style="display:none;">
  <div class="topbar">
    <div id="welcomeText">Welcome</div>
    <div>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </div>

  <div style="max-width:980px;margin:12px auto;padding:12px;">
    <!-- optional banners (static defaults) -->
    <img id="topBanner" class="banner" src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000de7861faafb1b8052e9bd122%20(1).png" alt="Top Banner">
    <h1 id="titleText" style="text-align:center;color:#c47f00">RJ рдкрд╛рдкрдбрд╝ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!</h1>

    <div style="background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.04);margin:12px 0;">
      <p><strong>рдирд╛рдо:</strong> <span id="showName">тАФ</span></p>
      <p><strong>рдореЛрдмрд╛рдЗрд▓:</strong> <span id="showMobile">тАФ</span></p>
    </div>

    <img id="bottomBanner" class="banner" src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png" alt="Bottom Banner">
  </div>
</div>

<footer>┬й 2025 RJ рдкрд╛рдкрдбрд╝</footer>

<script>
/* storage key for registered user (local) */
const STORAGE_KEY = "rjpapad_user_data_v1";

/* helpers */
function showNotify(msg){
  const n = document.getElementById("notify");
  n.textContent = msg;
  n.classList.add("show");
  setTimeout(()=> n.classList.remove("show"), 3000);
}
function loadUser(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : { name:null, mobile:null };
  }catch{return {name:null,mobile:null}}
}
function saveUser(user){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(user));
}
function clearSession(){
  // we will not remove saved registration, only session (no persistent session used)
  // but to ensure "next time login required", we do nothing because we always start with login page
}

/* UI refs */
const loginPage = document.getElementById("loginPage");
const registerPage = document.getElementById("registerPage");
const mainSite = document.getElementById("mainSite");

/* On load: always show login first */
window.addEventListener("DOMContentLoaded", ()=>{
  showLogin();
});

/* Show screens */
function showLogin(){
  loginPage.style.display = "flex";
  registerPage.style.display = "none";
  mainSite.style.display = "none";
}
function showRegister(prefillMobile){
  loginPage.style.display = "none";
  registerPage.style.display = "flex";
  mainSite.style.display = "none";
  if(prefillMobile){
    document.getElementById("regMobile").value = prefillMobile;
  }
}
function openMain(user){
  loginPage.style.display = "none";
  registerPage.style.display = "none";
  mainSite.style.display = "block";
  document.getElementById("showName").textContent = user.name || "тАФ";
  document.getElementById("showMobile").textContent = user.mobile || "тАФ";
  document.getElementById("welcomeText").textContent = `Logged in as ${user.mobile}`;
}

/* Login button action */
document.getElementById("loginBtn").addEventListener("click", ()=>{
  const entered = document.getElementById("loginMobile").value.trim();
  if(!entered){ alert("рдХреГрдкрдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ"); return; }

  const user = loadUser();
  if(user && user.mobile === entered){
    // registered -> open main
    showNotify("тЬЕ рд▓реЙрдЧрд┐рди рд╕рдлрд▓!");
    openMain(user);
  } else {
    // not registered -> open register form with mobile prefilled
    showNotify("рдпрд╣ рдирдВрдмрд░ рд░рдЬрд┐рд╕реНрдЯрд░ рдирд╣реАрдВ рд╣реИ тАФ рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ");
    showRegister(entered);
  }
});

/* Register save action */
document.getElementById("regSaveBtn").addEventListener("click", ()=>{
  const name = document.getElementById("regName").value.trim();
  const mobile = document.getElementById("regMobile").value.trim();
  if(!mobile){ alert("рдХреГрдкрдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ"); return; }
  saveUser({ name, mobile });
  showNotify("тЬЕ рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди рд╕рдлрд▓!");
  const saved = loadUser();
  openMain(saved);
});

/* back to login from register */
document.getElementById("backToLoginBtn").addEventListener("click", ()=>{
  showLogin();
});

/* logout button */
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  if(!confirm("рдХреНрдпрд╛ рдЖрдк рд▓реЙрдЧрдЖрдЙрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?")) return;
  // do not delete stored registration, only return to login
  showNotify("ЁЯФУ рд▓реЙрдЧрдЖрдЙрдЯ рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛");
  showLogin();
});

/* auto-logout on tab close: keep registration saved, but force login next time by showing login on load */
window.addEventListener("beforeunload", ()=>{
  // nothing to clear from localStorage (we retain registration)
  // by design next load shows login page
});
</script>
</body>
</html>
