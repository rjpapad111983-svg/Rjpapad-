<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RJ Papad - MLM Wallet</title>
<style>
:root{
  --accent:#ffb300;
  --bg:#fff8dc;
  --card:#fff;
  --muted:#666;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,Roboto,Arial;background:var(--bg);color:#222;}
header{background:var(--accent);color:#fff;padding:12px 14px;display:flex;align-items:center;position:sticky;top:0;z-index:5;}
.menu-btn{font-size:26px;margin-right:10px;cursor:pointer}
header h1{flex:1;font-size:18px;margin:0;text-align:center}
main{padding:16px;max-width:900px;margin:auto}
.card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 14px rgba(0,0,0,0.08);margin-bottom:18px}
button,input{font-size:15px;padding:10px;border-radius:8px;border:1px solid #ccc}
button.primary{background:var(--accent);border:none;color:#fff}
button.ghost{background:#f5f5f5;border:none}
.langbar{display:flex;gap:8px;margin-bottom:10px}
.langbar button{background:#fff;border:1px solid #ddd;border-radius:999px;padding:6px 12px}
.banner img{width:100%;border-radius:12px;display:block}
.drawer{position:fixed;top:0;bottom:0;left:0;width:260px;background:#fff;box-shadow:2px 0 14px rgba(0,0,0,0.15);transform:translateX(-120%);transition:.3s;padding:18px;z-index:50}
.drawer.open{transform:translateX(0)}
.drawer button{display:block;width:100%;text-align:left;margin-bottom:10px;padding:10px;border:none;border-radius:8px;background:#fafafa}
#logo-page{position:fixed;inset:0;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100}
#logo-page img{max-width:80%;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.15)}
#logo-page.hidden{display:none}
.big-amount{font-size:26px;color:#d2691e;font-weight:bold}
.muted{color:var(--muted)}
.tree-node{padding:10px;border-radius:8px;background:#fff;margin:8px 0;display:flex;justify-content:space-between;align-items:center}
.plusbtn{border:2px solid #4aa3ff;border-radius:50%;width:36px;height:36px;color:#4aa3ff;background:#fff}
.note{font-size:13px;color:#777;margin-top:8px}
</style>
</head>
<body>
<header>
  <div class="menu-btn" id="menuBtn">â˜°</div>
  <h1>RJ Papad</h1>
</header>

<!-- Drawer -->
<div class="drawer" id="drawer">
  <h3>Menu</h3>
  <div id="menuLoggedAs" class="muted" style="margin-bottom:8px"></div>
  <button id="menuWalletBtn">ğŸ’° Wallet</button>
  <button id="menuMyTeamBtn">ğŸ§‘â€ğŸ¤â€ğŸ§‘ My Team</button>
  <button id="menuTreeBtn">ğŸŒ³ MLM Tree</button>
  <button id="menuOrderBtn">ğŸ›’ Place Order</button>
  <hr/>
  <button id="menuAdminBtn">ğŸ” Admin</button>
  <button id="menuLogoutBtn">ğŸšª Logout</button>
</div>

<!-- Logo Page -->
<div id="logo-page">
  <img id="logoImg" src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_0000000040986208ae9fdd85a3a3cbc8.png" alt="Logo">
  <div class="langbar">
    <button id="lang-hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
    <button id="lang-en">English</button>
    <button id="lang-gu">àª—à«àªœàª°àª¾àª¤à«€</button>
  </div>
  <button class="primary" id="logoHideBtn">à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚ / Continue</button>
</div>

<!-- Register / Login Overlay -->
<div id="authOverlay" style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:200;background:rgba(0,0,0,0.3);">
  <div style="width:92%;max-width:420px;background:#fff;padding:18px;border-radius:12px;">
    <h2>à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° / à¤²à¥‰à¤—à¤¿à¤¨</h2>
    <input id="reg_name" placeholder="à¤¨à¤¾à¤® (à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•)" style="width:100%;margin-bottom:8px"/>
    <input id="reg_mobile" placeholder="à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° (required)" style="width:100%;margin-bottom:8px"/>
    <div style="display:flex;gap:8px;">
      <button id="btnRegister" class="primary" style="flex:1">Register</button>
      <button id="btnLogin" class="ghost" style="flex:1">Login</button>
    </div>
  </div>
</div>

<main>
  <!-- Banners -->
  <div id="bannersWrap" class="card">
    <div class="langbar">
      <button id="hiBtn">à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
      <button id="enBtn">English</button>
      <button id="guBtn">àª—à«àªœàª°àª¾àª¤à«€</button>
    </div>
    <div class="banner"><img id="bannerImg" src="" alt="banner"></div>
    <div id="bannerText" class="muted">RJ à¤ªà¤¾à¤ªà¤¡à¤¼ â€” à¤¸à¥à¤µà¤¾à¤¦ à¤®à¥‡à¤‚ à¤–à¤¾à¤¸</div>
  </div>

  <!-- Wallet -->
  <div id="walletCard" class="card" style="display:none">
    <h3>My Wallet</h3>
    <div id="walletAmount" class="big-amount">â‚¹0</div>
    <div id="walletBank" class="muted">HDFC Bank â€¢ demo@upi</div>
    <div style="height:10px"></div>
    <input id="addAmountInp" placeholder="Add amount â‚¹">
    <button class="primary" id="addAmountBtn">Add</button>
    <div style="height:10px"></div>
    <button class="ghost" id="withdrawBtn">Withdraw (Request)</button>
    <div class="note">10% fee applies. Admin approves manually.</div>
  </div>

  <!-- My Team -->
  <div id="myTeamCard" class="card" style="display:none">
    <h3>My Team</h3>
    <div id="teamList"></div>
  </div>

  <!-- Tree -->
  <div id="treeCard" class="card" style="display:none">
    <h3>MLM Tree</h3>
    <div id="treeCanvasWrap"></div>
  </div>

  <!-- Admin -->
  <div id="adminPanel" class="card" style="display:none">
    <h3>Admin Panel</h3>
    <ul id="withdrawRequests"></ul>
  </div>
</main>

<script>
const ADMIN_PASSWORD="Rjpapad@2025";
const BANNER_HI="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000de7861faafb1b8052e9bd122%20(1).png";
const BANNER_EN="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png";

let users=JSON.parse(localStorage.getItem("rp_users_v1")||"{}");
let me=JSON.parse(localStorage.getItem("rp_me")||"null");
let withdraws=JSON.parse(localStorage.getItem("rp_withdraws_v1")||"[]");
let currentLang=localStorage.getItem("rp_lang_v1")||"hi";

function saveAll(){
  localStorage.setItem("rp_users_v1",JSON.stringify(users));
  localStorage.setItem("rp_me",JSON.stringify(me));
  localStorage.setItem("rp_withdraws_v1",JSON.stringify(withdraws));
  localStorage.setItem("rp_lang_v1",currentLang);
}
setInterval(saveAll,2000);

/* Auth overlay */
const authOverlay=document.getElementById('authOverlay');
const btnRegister=document.getElementById('btnRegister');
const btnLogin=document.getElementById('btnLogin');
function openAuthIfNeeded(){
  if(!me){authOverlay.style.display='flex';}
  else{authOverlay.style.display='none';}
}
btnRegister.onclick=()=>{
  const n=document.getElementById('reg_name').value.trim();
  const m=document.getElementById('reg_mobile').value.trim();
  if(!m)return alert('à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚');
  if(!users[m]){
    users[m]={mobile:m,name:n||m,balance:0,children:[]};
    me={mobile:m};
    saveAll();authOverlay.style.display='none';updateWallet();showSection('home');
  }else alert('User already exists');
}
btnLogin.onclick=()=>{
  const m=document.getElementById('reg_mobile').value.trim();
  if(!m)return alert('à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚');
  if(users[m]){me={mobile:m};saveAll();authOverlay.style.display='none';updateWallet();showSection('home');}
  else alert('à¤ªà¤¹à¤²à¥‡ Register à¤•à¤°à¥‡à¤‚');
}
openAuthIfNeeded();

/* Lang change */
function setLang(lang){
  currentLang=lang;
  if(lang==="hi"){bannerImg.src=BANNER_HI;bannerText.innerText="RJ à¤ªà¤¾à¤ªà¤¡à¤¼ â€” à¤¸à¥à¤µà¤¾à¤¦ à¤®à¥‡à¤‚ à¤–à¤¾à¤¸";}
  if(lang==="en"){bannerImg.src=BANNER_EN;bannerText.innerText="RJ Papad â€” Homemade taste";}
  if(lang==="gu"){bannerImg.src=BANNER_HI;bannerText.innerText="RJ àªªàª¾àªªàª¡ â€” àª¸à«àªµàª¾àª¦àª®àª¾àª‚ àª–àª¾àª¸";}
  saveAll();
}
["hi","en","gu"].forEach(l=>{
  document.getElementById(l+"Btn").onclick=()=>setLang(l);
  document.getElementById("lang-"+l).onclick=()=>setLang(l);
});
setLang(currentLang);

/* Menu + sections */
const drawer=document.getElementById('drawer');
menuBtn.onclick=()=>drawer.classList.toggle('open');
menuLogoutBtn.onclick=()=>{me=null;saveAll();location.reload();}
function showSection(s){
  bannersWrap.style.display="none";walletCard.style.display="none";myTeamCard.style.display="none";treeCard.style.display="none";adminPanel.style.display="none";
  if(s==="home")bannersWrap.style.display="block";
  if(s==="wallet")walletCard.style.display="block";
  if(s==="team")myTeamCard.style.display="block";
  if(s==="tree")treeCard.style.display="block";
  if(s==="admin")adminPanel.style.display="block";
}
menuWalletBtn.onclick=()=>{drawer.classList.remove('open');showSection('wallet');updateWallet();}
menuMyTeamBtn.onclick=()=>{drawer.classList.remove('open');showSection('team');renderTeam();}
menuTreeBtn.onclick=()=>{drawer.classList.remove('open');showSection('tree');renderTree();}
menuAdminBtn.onclick=()=>{
  const p=prompt('Enter admin password:');
  if(p===ADMIN_PASSWORD){drawer.classList.remove('open');showSection('admin');renderWithdraws();}
  else alert('Wrong password');
};
menuOrderBtn.onclick=()=>{
  if(!me)return alert('Login first');
  const sponsor=users[me.mobile]&&users[me.mobile].parent;
  if(sponsor&&users[sponsor]){
    users[sponsor].balance=(users[sponsor].balance||0)+50;saveAll();alert('Order placed â€” â‚¹50 commission added.');
  }else alert('Order placed â€” no sponsor found.');
}

/* Wallet */
function updateWallet(){
  if(!me)return;
  const u=users[me.mobile]||{balance:0};
  walletAmount.innerText="â‚¹"+(u.balance||0);
}
addAmountBtn.onclick=()=>{
  const amt=parseFloat(addAmountInp.value);
  if(!amt)return alert('Enter amount');
  users[me.mobile].balance=(users[me.mobile].balance||0)+amt;
  addAmountInp.value="";saveAll();updateWallet();
}
withdrawBtn.onclick=()=>{
  const amt=parseFloat(prompt('Withdraw amount?'));
  if(!amt)return;
  const u=users[me.mobile];
  if(amt>u.balance)return alert('Not enough balance');
  const fee=Math.round(amt*0.1);
  u.balance-=amt;withdraws.push({id:Date.now(),mobile:me.mobile,amount:amt,fee,after:amt-fee,status:'pending'});
  saveAll();updateWallet();alert('Withdraw requested (10% fee)');
}

/* Team */
function renderTeam(){
  teamList.innerHTML="";
  if(!me)return;
  const u=users[me.mobile]||{children:[]};
  (u.children||[]).forEach(c=>{
    const d=document.createElement('div');
    d.className='tree-node';
    d.innerHTML=`<div>${users[c]?.name||c}</div>`;
    teamList.appendChild(d);
  });
}

/* Tree */
function renderTree(){
  treeCanvasWrap.innerHTML="";
  if(!me)return;
  const root=users[me.mobile];
  const box=document.createElement('div');
  box.innerHTML=`<div class='card'>${root.name||root.mobile}</div>`;
  const kids=root.children||[];
  const row=document.createElement('div');
  row.style.display='flex';row.style.gap='10px';row.style.justifyContent='center';row.style.marginTop='10px';
  kids.forEach(k=>{
    const c=document.createElement('div');c.className='card';c.innerText=users[k]?.name||k;row.appendChild(c);
  });
  treeCanvasWrap.appendChild(box);treeCanvasWrap.appendChild(row);
}

/* Admin */
function renderWithdraws(){
  withdrawRequests.innerHTML='';
  withdraws.forEach(w=>{
    const li=document.createElement('li');
    li.innerHTML=`${w.mobile} â†’ â‚¹${w.amount} (${w.status})`;
    if(w.status==='pending'){
      const b=document.createElement('button');b.textContent='Approve';
      b.onclick=()=>{w.status='approved';saveAll();renderWithdraws();alert('Approved (demo)');};
      li.appendChild(b);
    }
    withdrawRequests.appendChild(li);
  });
}

/* initial */
updateWallet();showSection('home');
</script>
</body>
</html>
