<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RJ Papad ‚Äî Register / Wallet / Team</title>
<style>
:root{--accent:#ffb300;--bg:#fff8dc;--card:#fff;--muted:#666}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,Roboto,Arial;background:var(--bg);color:#222}
header{background:var(--accent);color:#fff;padding:12px 14px;display:flex;align-items:center;gap:8px;position:sticky;top:0;z-index:10}
.menu-btn{font-size:24px;cursor:pointer}
.brand{flex:1;text-align:center;font-weight:700}
.container{max-width:920px;margin:16px auto;padding:0 14px}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,0.06);margin-bottom:16px}
input,button,select,textarea{font-size:15px;padding:10px;border-radius:8px;border:1px solid #ddd}
button.primary{background:var(--accent);border:none;color:#fff}
button.ghost{background:#f5f5f5;border:none}
.langbar{display:flex;gap:8px;margin-bottom:12px}
.langbar button{padding:8px 12px;border-radius:999px;border:1px solid #eee;background:#fff}
.banner img{width:100%;border-radius:12px;display:block}
.drawer{position:fixed;left:0;top:0;bottom:0;width:300px;background:#fff;box-shadow:2px 0 18px rgba(0,0,0,0.12);transform:translateX(-120%);transition:transform .25s;z-index:50;padding:18px}
.drawer.open{transform:translateX(0)}
#overlay{position:fixed;inset:0;background:rgba(0,0,0,0.25);display:none;z-index:40}
.small{color:var(--muted);font-size:13px}
.tree-node{padding:10px;border-radius:8px;background:#fff;margin:8px 0;display:flex;align-items:center;justify-content:space-between}
.plusbtn{border-radius:6px;padding:6px 8px;border:1px solid #ddd;background:#fff;cursor:pointer}
.hidden{display:none}
.logo-top{display:flex;justify-content:center;margin-bottom:12px;}
.logo-top img{max-width:160px;border-radius:8px;box-shadow:0 3px 8px rgba(0,0,0,0.15);}
pre{white-space:pre-wrap;word-break:break-word;background:#f9f9f9;padding:10px;border-radius:8px;border:1px solid #eee}
</style>
</head>
<body>

<header>
  <div class="menu-btn" id="menuToggle">‚ò∞</div>
  <div class="brand">RJ Papad</div>
</header>

<!-- Drawer -->
<div id="drawer" class="drawer" aria-hidden="true">
  <h3>Menu</h3>
  <div id="loggedAs" class="small" style="margin-bottom:10px">Not logged</div>
  <button id="btnWallet">üí∞ Wallet</button>
  <button id="btnMyTeam">üë• My Team</button>
  <button id="btnTree">üå≥ MLM Tree</button>
  <button id="btnOrder">üõí Place Order</button>
  <hr style="margin:12px 0" />
  <button id="btnAdmin">üîê Admin</button>
  <div style="height:8px"></div>
  <button id="exportUsersBtn">‚¨á Export Users (JSON)</button>
  <input id="importFile" type="file" accept=".json" style="display:none" />
  <button id="importUsersBtn">‚¨Ü Import Users (JSON)</button>
  <div style="height:8px"></div>
  <button id="btnLogout">üö™ Logout</button>
</div>
<div id="overlay"></div>

<div class="container">

  <!-- AUTH area -->
  <div id="authCard" class="card">
    <div class="logo-top">
      <img src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_0000000040986208ae9fdd85a3a3cbc8.png" alt="Logo">
    </div>
    <h2 id="authTitle">Register / Login</h2>

    <!-- Register -->
    <div id="fullRegisterBlock" class="hidden">
      <label>‡§®‡§æ‡§Æ (optional)</label>
      <input id="reg_name" placeholder="Name (optional)" />
      <div style="height:8px"></div>
      <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (required)</label>
      <input id="reg_mobile" placeholder="Mobile number" />
      <div style="height:8px"></div>
      <label>Joined by (Parent mobile ‚Äî optional)</label>
      <input id="reg_parent" placeholder="Parent mobile (optional)" />
      <div style="height:10px"></div>
      <div style="display:flex;gap:8px">
        <button id="registerBtn" class="primary" style="flex:1">Register</button>
        <button id="registerCancelBtn" class="ghost" style="flex:1">Cancel</button>
      </div>
    </div>

    <!-- Login -->
    <div id="loginOnlyBlock" class="hidden">
      <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (Login)</label>
      <input id="login_mobile" placeholder="Enter mobile to login" />
      <div style="height:8px"></div>
      <div style="display:flex;gap:8px">
        <button id="loginOnlyBtn" class="primary" style="flex:1">Login</button>
        <button id="showRegisterForJoinBtn" class="ghost" style="flex:1">Register with Parent</button>
      </div>
    </div>

    <div id="authMsg" class="small" style="margin-top:8px;color:#b00"></div>
    <div id="authInfo" class="small" style="margin-top:8px;color:#333">
      ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§™‡§π‡§≤‡•á user ‡§ï‡•ã Register ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§è‡§ï user ‡§¨‡§® ‡§ú‡§æ‡§®‡•á ‡§™‡§∞ ‡§Ü‡§ó‡•á ‡§∏‡•á Login ‡§π‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ‡•§
    </div>
  </div>

  <!-- Home -->
  <div id="homeArea" class="card hidden">
    <div class="langbar">
      <button id="hi" class="langBtn">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
      <button id="en" class="langBtn">English</button>
      <button id="gu" class="langBtn">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button>
    </div>
    <div class="banner"><img id="bannerImg" src="" alt="Banner"></div>
    <h3 id="homeTitle">RJ ‡§™‡§æ‡§™‡§°‡§º ‚Äî Welcome</h3>
    <p class="small">Use menu to open Wallet / My Team / MLM Tree.</p>
  </div>

  <!-- Wallet -->
  <div id="walletArea" class="card hidden">
    <h3>My Wallet</h3>
    <div style="display:flex;align-items:center;gap:12px">
      <div style="font-size:24px;font-weight:700;color:#d2691e">‚Çπ<span id="bal">0</span></div>
    </div>
    <div style="height:10px"></div>
    <div style="display:flex;gap:8px">
      <input id="addAmt" placeholder="Amount ‚Çπ" />
      <button id="addBtn" class="primary">Add</button>
    </div>
    <div style="height:10px"></div>
    <button id="withdrawBtn" class="ghost">Withdraw (Request)</button>
    <div id="walletMsg" class="small" style="margin-top:8px"></div>
  </div>

  <!-- Team -->
  <div id="teamArea" class="card hidden">
    <h3>My Team</h3>
    <div id="teamList"></div>
  </div>

  <!-- Tree -->
  <div id="treeArea" class="card hidden">
    <h3>MLM Tree</h3>
    <div id="treeView"></div>
  </div>

  <!-- Admin -->
  <div id="adminArea" class="card hidden">
    <h3>Admin ‚Äî Pending Withdraws</h3>
    <div id="requests"></div>
  </div>

</div>

<script>
const ADMIN_PWD = "Rjpapad@2025";
const BANNER_HI = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000de7861faafb1b8052e9bd122%20(1).png";
const BANNER_EN = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png";
const KEY_USERS="rp_users_v5",KEY_ME="rp_me_v5",KEY_WDS="rp_withdraws_v5",KEY_LANG="rp_lang_v5";
function load(k,d){try{let v=localStorage.getItem(k);return v?JSON.parse(v):d}catch(e){return d}}
function save(k,v){localStorage.setItem(k,JSON.stringify(v))}
let users=load(KEY_USERS,{}),me=load(KEY_ME,null),withdraws=load(KEY_WDS,[]),lang=localStorage.getItem(KEY_LANG)||"hi";
function persist(){save(KEY_USERS,users);save(KEY_ME,me);save(KEY_WDS,withdraws);localStorage.setItem(KEY_LANG,lang)}
setInterval(persist,2000);
const authCard=document.getElementById('authCard'),authTitle=document.getElementById('authTitle'),
fullRegister=document.getElementById('fullRegisterBlock'),loginOnly=document.getElementById('loginOnlyBlock'),
regName=document.getElementById('reg_name'),regMobile=document.getElementById('reg_mobile'),regParent=document.getElementById('reg_parent'),
registerBtn=document.getElementById('registerBtn'),cancelBtn=document.getElementById('registerCancelBtn'),
loginOnlyBtn=document.getElementById('loginOnlyBtn'),loginMobile=document.getElementById('login_mobile'),
showRegisterForJoinBtn=document.getElementById('showRegisterForJoinBtn'),authMsg=document.getElementById('authMsg');
const homeArea=document.getElementById('homeArea'),walletArea=document.getElementById('walletArea'),teamArea=document.getElementById('teamArea'),treeArea=document.getElementById('treeArea'),adminArea=document.getElementById('adminArea');
const bannerImg=document.getElementById('bannerImg'),homeTitle=document.getElementById('homeTitle');
function setLang(l){lang=l;localStorage.setItem(KEY_LANG,l);if(l==='hi'){bannerImg.src=BANNER_HI;homeTitle.innerText='RJ ‡§™‡§æ‡§™‡§°‡§º ‚Äî ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§'}else if(l==='en'){bannerImg.src=BANNER_EN;homeTitle.innerText='RJ Papad ‚Äî Welcome'}else{bannerImg.src=BANNER_HI;homeTitle.innerText='RJ ‡™™‡™æ‡™™‡™° ‚Äî Welcome'}persist();}
document.querySelectorAll('.langBtn').forEach(b=>b.onclick=()=>setLang(b.id));
function showAuth(){authMsg.innerText='';if(Object.keys(users).length===0){fullRegister.classList.remove('hidden');loginOnly.classList.add('hidden');authTitle.innerText='Register (first user)';}else{fullRegister.classList.add('hidden');loginOnly.classList.remove('hidden');authTitle.innerText='Login';}
if(me){openHome();}}
registerBtn.onclick=()=>{let n=regName.value.trim(),m=regMobile.value.trim(),p=regParent.value.trim();if(!m)return authMsg.innerText='‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ú‡§∞‡•Ç‡§∞‡•Ä';if(users[m])return authMsg.innerText='Already exists';users[m]={mobile:m,name:n||m,balance:0,parent:null,children:[]};if(p&&users[p]){users[m].parent=p;users[p].children.push(m);}me={mobile:m,name:users[m].name};persist();openHome();}
cancelBtn.onclick=()=>{showAuth();}
loginOnlyBtn.onclick=()=>{let m=loginMobile.value.trim();if(!m)return authMsg.innerText='‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§°‡§æ‡§≤‡•á‡§Ç';if(users[m]){me={mobile:m,name:users[m].name};persist();openHome();}else authMsg.innerText='User ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ';}
showRegisterForJoinBtn.onclick=()=>{fullRegister.classList.remove('hidden');loginOnly.classList.add('hidden');authTitle.innerText='Register with Parent';}
function hideAll(){homeArea.classList.add('hidden');walletArea.classList.add('hidden');teamArea.classList.add('hidden');treeArea.classList.add('hidden');adminArea.classList.add('hidden');}
function openHome(){authCard.classList.add('hidden');hideAll();homeArea.classList.remove('hidden');setLang(lang);updateLoggedAs();}
document.getElementById('btnWallet').onclick=()=>{hideAll();walletArea.classList.remove('hidden');updateWallet();}
document.getElementById('btnMyTeam').onclick=()=>{hideAll();teamArea.classList.remove('hidden');renderTeam();}
document.getElementById('btnTree').onclick=()=>{hideAll();treeArea.classList.remove('hidden');renderTree();}
document.getElementById('btnOrder').onclick=()=>simulateOrder();
document.getElementById('btnAdmin').onclick=()=>adminPrompt();
document.getElementById('btnLogout').onclick=()=>{me=null;save(KEY_ME,null);location.reload();}
const balSpan=document.getElementById('bal'),addAmt=document.getElementById('addAmt'),addBtn=document.getElementById('addBtn'),withdrawBtn=document.getElementById('withdrawBtn'),walletMsg=document.getElementById('walletMsg');
addBtn.onclick=()=>{if(!me)return;let v=parseFloat(addAmt.value);if(!v||v<=0)return alert('Invalid');users[me.mobile].balance+=v;addAmt.value='';persist();updateWallet();walletMsg.innerText='Added';}
withdrawBtn.onclick=()=>{if(!me)return;let u=users[me.mobile];if(u.balance<=0)return alert('No balance');let a=parseFloat(prompt('Withdraw amount'));if(!a||a<=0)return;if(a>u.balance)return alert('Insufficient');let fee=Math.round(a*0.1);u.balance-=a;withdraws.push({id:Date.now(),mobile:me.mobile,amount:a,fee,net:a-fee,status:'pending'});persist();updateWallet();walletMsg.innerText='Request sent';}
function updateWallet(){if(!me)return;balSpan.innerText=Math.round(users[me.mobile].balance*100)/100;}
const teamList=document.getElementById('teamList'),treeView=document.getElementById('treeView');
function renderTeam(){teamList.innerHTML='';if(!me)return;let c=users[me.mobile].children||[];if(!c.length)return teamList.innerHTML='<div class="small">No members</div>';c.forEach(m=>{let d=document.createElement('div');d.className='tree-node';d.innerHTML=`<div>${users[m].name}</div><div><button class='plusbtn'>[+]</button></div>`;teamList.appendChild(d);});}
function renderTree(){treeView.innerHTML='';if(!me)return;let u=users[me.mobile];let root=document.createElement('div');root.className='card';root.style.textAlign='center';root.innerHTML=`<b>${u.name}</b><div class='small'>${u.mobile}</div>`;treeView.appendChild(root);let kids=u.children||[];if(!kids.length){let e=document.createElement('div');e.className='card';e.style.textAlign='center';e.innerHTML='No downline';treeView.appendChild(e);}}
function simulateOrder(){if(!me)return;let p=users[me.mobile].parent;if(p&&users[p]){users[p].balance+=50;persist();alert('‚Çπ50 commission to sponsor');}}
function adminPrompt(){let p=prompt('Admin password');if(p===ADMIN_PWD){hideAll();adminArea.classList.remove('hidden');renderRequests();}}
function renderRequests(){let el=document.getElementById('requests');el.innerHTML='';if(!withdraws.length)return el.innerText='No withdraws';withdraws.forEach(w=>{let d=document.createElement('div');d.className='card';d.innerHTML=`${w.mobile} ‚Çπ${w.amount} - ${w.status}`;if(w.status==='pending'){let b=document.createElement('button');b.className='primary';b.innerText='Approve';b.onclick=()=>{w.status='approved';persist();renderRequests();};d.appendChild(b);}el.appendChild(d);});}
function updateLoggedAs(){document.getElementById('loggedAs').innerText=me?`Logged: ${me.mobile}`:'Not logged';}
setLang(lang);showAuth();updateLoggedAs();persist();
</script>
</body>
</html>
