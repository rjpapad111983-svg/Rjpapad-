
<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RJ Papad ‚Äî Register / Wallet / Team</title>
<style>
:root{--accent:#ffb300;--bg:#fff8dc;--card:#fff;--muted:#666}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,Roboto,Arial;background:var(--bg);color:#222}
header{background:var(--accent);color:#fff;padding:12px 14px;display:flex;align-items:center;gap:8px;position:sticky;top:0;z-index:10}
.menu-btn{font-size:24px;cursor:pointer}
.brand{flex:1;text-align:center;font-weight:700}
.container{max-width:920px;margin:16px auto;padding:0 14px}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 16px rgba(0,0,0,0.06);margin-bottom:16px}
input,button,select,textarea{font-size:15px;padding:10px;border-radius:8px;border:1px solid #ddd}
button.primary{background:var(--accent);border:none;color:#fff}
button.ghost{background:#f5f5f5;border:none}
.langbar{display:flex;gap:8px;margin-bottom:12px}
.langbar button{padding:8px 12px;border-radius:999px;border:1px solid #eee;background:#fff}
.banner img{width:100%;border-radius:12px;display:block}
.drawer{position:fixed;left:0;top:0;bottom:0;width:300px;background:#fff;box-shadow:2px 0 18px rgba(0,0,0,0.12);transform:translateX(-120%);transition:transform .25s;z-index:50;padding:18px}
.drawer.open{transform:translateX(0)}
#overlay{position:fixed;inset:0;background:rgba(0,0,0,0.25);display:none;z-index:40}
.small{color:var(--muted);font-size:13px}
.tree-node{padding:10px;border-radius:8px;background:#fff;margin:8px 0;display:flex;align-items:center;justify-content:space-between}
.plusbtn{border-radius:6px;padding:6px 8px;border:1px solid #ddd;background:#fff;cursor:pointer}
.hidden{display:none}
.logo-top{display:flex;justify-content:center;margin-bottom:12px;}
.logo-top img{max-width:160px;border-radius:8px;box-shadow:0 3px 8px rgba(0,0,0,0.15);}
pre{white-space:pre-wrap;word-break:break-word;background:#f9f9f9;padding:10px;border-radius:8px;border:1px solid #eee}
@media(min-width:900px){.logo-top img{max-width:220px}}
</style>
</head>
<body>

<header>
  <div class="menu-btn" id="menuToggle">‚ò∞</div>
  <div class="brand">RJ Papad</div>
</header>

<!-- Drawer (Export/Import buttons removed) -->
<div id="drawer" class="drawer" aria-hidden="true">
  <h3>Menu</h3>
  <div id="loggedAs" class="small" style="margin-bottom:10px">Not logged</div>
  <button id="btnWallet">üí∞ Wallet</button>
  <button id="btnMyTeam">üë• My Team</button>
  <button id="btnTree">üå≥ MLM Tree</button>
  <button id="btnOrder">üõí Place Order</button>
  <hr style="margin:12px 0" />
  <button id="btnAdmin">üîê Admin</button>
  <div style="height:8px"></div>
  <button id="btnLogout">üö™ Logout</button>
</div>
<div id="overlay"></div>

<div class="container">

  <!-- AUTH area -->
  <div id="authCard" class="card">
    <div class="logo-top">
      <img src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_0000000040986208ae9fdd85a3a3cbc8.png" alt="Logo">
    </div>
    <h2 id="authTitle">Register / Login</h2>

    <!-- Register -->
    <div id="fullRegisterBlock" class="hidden">
      <label>‡§®‡§æ‡§Æ (optional)</label>
      <input id="reg_name" placeholder="Name (optional)" />
      <div style="height:8px"></div>
      <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (required)</label>
      <input id="reg_mobile" placeholder="Mobile number" />
      <div style="height:8px"></div>
      <label>Joined by (Parent mobile ‚Äî optional)</label>
      <input id="reg_parent" placeholder="Parent mobile (optional)" />
      <div style="height:10px"></div>
      <div style="display:flex;gap:8px">
        <button id="registerBtn" class="primary" style="flex:1">Register</button>
        <button id="registerCancelBtn" class="ghost" style="flex:1">Cancel</button>
      </div>
    </div>

    <!-- Login -->
    <div id="loginOnlyBlock" class="hidden">
      <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (Login)</label>
      <input id="login_mobile" placeholder="Enter mobile to login" />
      <div style="height:8px"></div>
      <div style="display:flex;gap:8px">
        <button id="loginOnlyBtn" class="primary" style="flex:1">Login</button>
        <button id="showRegisterForJoinBtn" class="ghost" style="flex:1">Register with Parent</button>
      </div>
    </div>

    <div id="authMsg" class="small" style="margin-top:8px;color:#b00"></div>
    <div id="authInfo" class="small" style="margin-top:8px;color:#333">
      ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§™‡§π‡§≤‡•á user ‡§ï‡•ã Register ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§è‡§ï user ‡§¨‡§® ‡§ú‡§æ‡§®‡•á ‡§™‡§∞ ‡§Ü‡§ó‡•á ‡§∏‡•á Login ‡§π‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ‡•§
    </div>
  </div>

  <!-- Home -->
  <div id="homeArea" class="card hidden">
    <div class="langbar">
      <button id="hi" class="langBtn">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
      <button id="en" class="langBtn">English</button>
      <button id="gu" class="langBtn">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button>
    </div>

    <!-- First banner -->
    <div class="banner" style="margin-bottom:12px">
      <img id="bannerImg" src="" alt="Primary banner">
    </div>

    <!-- Second banner -->
    <div class="banner">
      <img id="bannerImg2" src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png" alt="Secondary banner">
    </div>

    <h3 id="homeTitle">RJ ‡§™‡§æ‡§™‡§°‡§º ‚Äî Welcome</h3>
    <p class="small">Use menu to open Wallet / My Team / MLM Tree.</p>
  </div>

  <!-- Wallet -->
  <div id="walletArea" class="card hidden">
    <h3>My Wallet</h3>
    <div style="display:flex;align-items:center;gap:12px">
      <div style="font-size:24px;font-weight:700;color:#d2691e">‚Çπ<span id="bal">0</span></div>
    </div>
    <div style="height:10px"></div>
    <div style="display:flex;gap:8px">
      <input id="addAmt" placeholder="Amount ‚Çπ" />
      <button id="addBtn" class="primary">Add</button>
    </div>
    <div style="height:10px"></div>
    <button id="withdrawBtn" class="ghost">Withdraw (Request)</button>
    <div id="walletMsg" class="small" style="margin-top:8px"></div>
  </div>

  <!-- Team -->
  <div id="teamArea" class="card hidden">
    <h3>My Team</h3>
    <div id="teamList"></div>
  </div>

  <!-- Tree -->
  <div id="treeArea" class="card hidden">
    <h3>MLM Tree</h3>
    <div id="treeView"></div>
  </div>

  <!-- Admin -->
  <div id="adminArea" class="card hidden">
    <h3>Admin ‚Äî Pending Withdraws</h3>
    <div id="requests"></div>
  </div>

</div>

<script>
const ADMIN_PWD = "Rjpapad@2025";
const BANNER_HI = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000de7861faafb1b8052e9bd122%20(1).png";
const BANNER_EN = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png";
const SECOND_BANNER_DEFAULT = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png";
const KEY_USERS="rp_users_v5",KEY_ME="rp_me_v5",KEY_WDS="rp_withdraws_v5",KEY_LANG="rp_lang_v5";
function load(k,d){try{let v=localStorage.getItem(k);return v?JSON.parse(v):d}catch(e){return d}}
function save(k,v){localStorage.setItem(k,JSON.stringify(v))}
let users=load(KEY_USERS,{}),me=load(KEY_ME,null),withdraws=load(KEY_WDS,[]),lang=localStorage.getItem(KEY_LANG)||"hi";
function persist(){save(KEY_USERS,users);save(KEY_ME,me);save(KEY_WDS,withdraws);localStorage.setItem(KEY_LANG,lang)}
setInterval(persist,2000);

/* UI refs */
const authCard=document.getElementById('authCard'),authTitle=document.getElementById('authTitle'),
fullRegister=document.getElementById('fullRegisterBlock'),loginOnly=document.getElementById('loginOnlyBlock'),
regName=document.getElementById('reg_name'),regMobile=document.getElementById('reg_mobile'),regParent=document.getElementById('reg_parent'),
registerBtn=document.getElementById('registerBtn'),cancelBtn=document.getElementById('registerCancelBtn'),
loginOnlyBtn=document.getElementById('loginOnlyBtn'),loginMobile=document.getElementById('login_mobile'),
showRegisterForJoinBtn=document.getElementById('showRegisterForJoinBtn'),authMsg=document.getElementById('authMsg');

const homeArea=document.getElementById('homeArea'),bannerImg=document.getElementById('bannerImg'),bannerImg2=document.getElementById('bannerImg2'),homeTitle=document.getElementById('homeTitle');
const walletArea=document.getElementById('walletArea'),balSpan=document.getElementById('bal'),addAmt=document.getElementById('addAmt'),addBtn=document.getElementById('addBtn'),withdrawBtn=document.getElementById('withdrawBtn'),walletMsg=document.getElementById('walletMsg');
const teamArea=document.getElementById('teamArea'),teamList=document.getElementById('teamList');
const treeArea=document.getElementById('treeArea'),treeView=document.getElementById('treeView');
const adminArea=document.getElementById('adminArea'),requestsDiv=document.getElementById('requests');

document.getElementById('menuToggle').onclick = ()=>{ document.getElementById('drawer').classList.toggle('open'); document.getElementById('overlay').style.display = document.getElementById('drawer').classList.contains('open') ? 'block' : 'none'; };
document.getElementById('overlay').onclick = ()=>{ document.getElementById('drawer').classList.remove('open'); document.getElementById('overlay').style.display = 'none'; };

document.getElementById('btnWallet').onclick=()=>{ closeDrawer(); hideAll(); walletArea.classList.remove('hidden'); updateWallet(); };
document.getElementById('btnMyTeam').onclick=()=>{ closeDrawer(); hideAll(); teamArea.classList.remove('hidden'); renderTeam(); };
document.getElementById('btnTree').onclick=()=>{ closeDrawer(); hideAll(); treeArea.classList.remove('hidden'); renderTree(); };
document.getElementById('btnOrder').onclick=()=>{ closeDrawer(); simulateOrder(); };
document.getElementById('btnAdmin').onclick=()=>{ closeDrawer(); adminPrompt(); };
document.getElementById('btnLogout').onclick=()=>{ me=null; save(KEY_ME,null); location.reload(); };

/* Language & banners */
function setLang(l){
  lang = l; localStorage.setItem(KEY_LANG, l);
  if(l==='hi'){ bannerImg.src = BANNER_HI; bannerImg2.src = SECOND_BANNER_DEFAULT; homeTitle.innerText = 'RJ ‡§™‡§æ‡§™‡§°‡§º ‚Äî ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§'; }
  else if(l==='en'){ bannerImg.src = BANNER_EN; bannerImg2.src = SECOND_BANNER_DEFAULT; homeTitle.innerText = 'RJ Papad ‚Äî Welcome'; }
  else { bannerImg.src = BANNER_HI; bannerImg2.src = SECOND_BANNER_DEFAULT; homeTitle.innerText = 'RJ ‡™™‡™æ‡™™‡™° ‚Äî Welcome'; }
  persist();
}
document.querySelectorAll('.langBtn').forEach(b=>b.addEventListener('click', ()=> setLang(b.id)));
setLang(lang);

/* Auth UI logic */
function showAuthBasedOnUsers(){
  authMsg.innerText = '';
  if(Object.keys(users).length === 0){
    fullRegister.classList.remove('hidden'); loginOnly.classList.add('hidden'); authTitle.innerText = 'Register (first user)';
  } else {
    fullRegister.classList.add('hidden'); loginOnly.classList.remove('hidden'); authTitle.innerText = 'Login';
  }
  if(me){ openHome(); } else { authCard.classList.remove('hidden'); hideAll(); }
}

registerBtn.onclick = ()=>{
  const n = regName.value.trim(), m = regMobile.value.trim(), p = regParent.value.trim();
  if(!m){ authMsg.innerText='‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ú‡§∞‡•Ç‡§∞‡•Ä'; return; }
  if(users[m]){ authMsg.innerText='User exists'; return; }
  users[m] = { mobile:m, name:n||m, balance:0, parent:null, children:[] };
  if(p && users[p]){ users[m].parent = p; users[p].children = users[p].children || []; users[p].children.push(m); }
  me = { mobile:m, name:users[m].name }; persist(); openHome();
};
document.getElementById('registerCancelBtn').onclick = ()=> { regName.value=''; regMobile.value=''; regParent.value=''; showAuthBasedOnUsers(); };

document.getElementById('loginOnlyBtn').onclick = ()=> {
  const m = document.getElementById('login_mobile').value.trim();
  if(!m){ authMsg.innerText='‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§°‡§æ‡§≤‡•á‡§Ç'; return; }
  if(users[m]){ me = { mobile:m, name:users[m].name }; persist(); openHome(); } else authMsg.innerText='User ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ';
};
showRegisterForJoinBtn.onclick = ()=> { fullRegister.classList.remove('hidden'); loginOnly.classList.add('hidden'); authTitle.innerText='Register with Parent'; };

/* Sections */
function hideAll(){ homeArea.classList.add('hidden'); walletArea.classList.add('hidden'); teamArea.classList.add('hidden'); treeArea.classList.add('hidden'); adminArea.classList.add('hidden'); }
function openHome(){ authCard.classList.add('hidden'); hideAll(); homeArea.classList.remove('hidden'); updateLoggedAs(); setLang(lang); persist(); }
function closeDrawer(){ document.getElementById('drawer').classList.remove('open'); document.getElementById('overlay').style.display='none'; }

/* Wallet */
addBtn.onclick = ()=> { if(!me) return alert('Login first'); const v = parseFloat(addAmt.value||0); if(!v||v<=0) return alert('Invalid'); users[me.mobile].balance = (users[me.mobile].balance||0) + v; addAmt.value=''; persist(); updateWallet(); walletMsg.innerText='Added'; };
withdrawBtn.onclick = ()=> { if(!me) return alert('Login first'); const u = users[me.mobile]; if((u.balance||0) <= 0) return alert('No balance'); const want = parseFloat(prompt('Withdraw amount (‚Çπ)')); if(!want||want<=0) return; if(want > u.balance) return alert('Not enough'); const fee = Math.round(want*0.10); u.balance = Math.round((u.balance - want)*100)/100; withdraws.push({ id:Date.now(), mobile:me.mobile, amount:want, fee, net:want-fee, status:'pending' }); persist(); updateWallet(); walletMsg.innerText='Withdraw requested'; };
function updateWallet(){ if(!me) return; document.getElementById('bal').innerText = Math.round((users[me.mobile].balance||0)*100)/100; }

/* Team & Tree */
function renderTeam(){ teamList.innerHTML=''; if(!me) return; const kids = users[me.mobile].children||[]; if(!kids.length){ teamList.innerHTML='<div class="small">No members</div>'; return; } kids.forEach(m=>{ const d=document.createElement('div'); d.className='tree-node'; d.innerHTML = `<div>${users[m].name||m}</div><div><button class="plusbtn">[+]</button></div>`; teamList.appendChild(d); d.querySelector('.plusbtn').onclick = ()=>{ const subs = users[m].children||[]; if(!subs.length) return alert('No sub-members'); alert('Downline: '+subs.map(x=>users[x].name||x).join(', ')); }; }); }
function openRegisterWithParent(parent){ fullRegister.classList.remove('hidden'); loginOnly.classList.add('hidden'); regParent.value = parent; authTitle.innerText = 'Register under '+parent; }
function renderTree(){ treeView.innerHTML=''; if(!me) return; const root = users[me.mobile]; const rootBox = document.createElement('div'); rootBox.className='card'; rootBox.style.textAlign='center'; rootBox.innerHTML = `<b>${root.name}</b><div class="small">${root.mobile}</div>`; treeView.appendChild(rootBox); const kids = root.children||[]; const row = document.createElement('div'); row.style.display='flex'; row.style.gap='12px'; row.style.justifyContent='center'; row.style.marginTop='12px'; if(!kids.length){ const e = document.createElement('div'); e.className='card'; e.style.minWidth='160px'; e.style.textAlign='center'; e.innerHTML = 'No downline<br/><button class="primary" id="joinHere">Join here</button>'; row.appendChild(e); treeView.appendChild(row); e.querySelector('#joinHere').onclick = ()=> openRegisterWithParent(me.mobile); return; } kids.forEach(k=>{ const c=document.createElement('div'); c.className='card'; c.style.minWidth='160px'; c.style.textAlign='center'; c.innerHTML = `${users[k].name||k}<div class="small">${k}</div>`; row.appendChild(c); }); treeView.appendChild(row); }

/* Orders & Admin */
function simulateOrder(){ if(!me) return alert('Login first'); const sponsor = users[me.mobile].parent; if(sponsor && users[sponsor]){ users[sponsor].balance = (users[sponsor].balance||0) + 50; persist(); alert('‚Çπ50 commission added to sponsor'); } else alert('No sponsor'); }
function adminPrompt(){ const p = prompt('Admin password:'); if(!p) return; if(p !== ADMIN_PWD) return alert('Wrong'); hideAll(); adminArea.classList.remove('hidden'); renderRequests(); }
function renderRequests(){ requestsDiv.innerHTML=''; if(!withdraws.length) { requestsDiv.innerText='No withdraws'; return; } withdraws.forEach(w=>{ const d=document.createElement('div'); d.className='card'; d.innerHTML = `<div><strong>${w.mobile}</strong> ‚Äî ‚Çπ${w.amount} (fee ‚Çπ${w.fee}) ‚Äî ${w.status}</div>`; if(w.status==='pending'){ const a = document.createElement('button'); a.className='primary'; a.innerText='Approve'; a.onclick = ()=>{ w.status='approved'; persist(); renderRequests(); alert('Approved (demo)'); }; d.appendChild(a); } requestsDiv.appendChild(d); }); }

/* Utility */
function updateLoggedAs(){ document.getElementById('loggedAs').innerText = me ? `Logged as: ${users[me.mobile]?.name || me.mobile}` : 'Not logged'; }
function closeDrawer(){ document.getElementById('drawer').classList.remove('open'); document.getElementById('overlay').style.display='none'; }

/* Init */
updateLoggedAs();
showAuthBasedOnUsers();
setLang(lang);
persist();
window.addEventListener('beforeunload', persist);

</script>
</body>
</html>
