<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RJ Papad Register Flow</title>
<style>
:root{--bg:#fff8dc;--accent:#ffb300;--card:#fff;--muted:#666}
html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,"Noto Sans",sans-serif;background:var(--bg);color:#222;text-align:center;}
.overlay{position:fixed;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box;}
.panel{background:var(--card);max-width:420px;width:100%;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.15);padding:22px;box-sizing:border-box;}
h2{margin:0 0 12px;color:#c47d04;font-size:20px;}
input{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;font-size:15px;}
button{cursor:pointer;border:0;border-radius:10px;padding:12px 16px;font-weight:700;width:100%;}
.btn-primary{background:var(--accent);color:#111;}
.btn-secondary{background:#eee;color:#222;}
.logo-full{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;height:100%;background:#fff;}
.logo-full img{max-width:90%;width:420px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.08);}
.banner{background:#fff7e6;padding:14px;border-radius:10px;border:1px solid rgba(0,0,0,0.05);font-weight:700;margin:12px;text-align:center;}
</style>
</head>
<body>

<!-- Step 1: Register -->
<div id="registerPage" class="overlay">
  <div class="panel">
    <h2>‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</h2>
    <p style="font-size:13px;color:#555;">‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</p>
    <input id="regName" type="text" placeholder="‡§®‡§æ‡§Æ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)">
    <input id="regMobile" type="tel" inputmode="numeric" maxlength="10" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (10 ‡§Ö‡§Ç‡§ï)">
    <button id="btnRegister" class="btn-primary">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
    <div style="height:8px"></div>
    <p id="regError" style="color:red;font-size:13px;"></p>
  </div>
</div>

<!-- Step 2: Login -->
<div id="loginPage" class="overlay" style="display:none;">
  <div class="panel">
    <h2>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
    <p style="font-size:13px;color:#555;">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•Å‡§Ü ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</p>
    <input id="loginMobile" type="tel" inputmode="numeric" maxlength="10" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (10 ‡§Ö‡§Ç‡§ï)">
    <button id="btnLogin" class="btn-primary">‡§≤‡•â‡§ó‡§ø‡§®</button>
    <div style="height:8px"></div>
    <p id="loginError" style="color:red;font-size:13px;"></p>
  </div>
</div>

<!-- Step 3: Logo Page -->
<div id="logoPage" class="overlay" style="display:none;">
  <div class="logo-full">
    <img src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_0000000040986208ae9fdd85a3a3cbc8.png" alt="RJ Papad Logo">
    <button id="btnNext" class="btn-primary" style="width:auto;padding:10px 30px;">‡§Ö‡§ó‡§≤‡§æ ‡§™‡•á‡§ú ‚ûú</button>
  </div>
</div>

<!-- Step 4: Main Page -->
<div id="mainPage" style="display:none;">
  <div class="banner" id="bannerTop">üü° Top Banner (‡§π‡§ø‡§Ç‡§¶‡•Ä)</div>
  <div class="banner" id="bannerBottom">üü° Bottom Banner (‡§π‡§ø‡§Ç‡§¶‡•Ä)</div>
  <p style="font-weight:600;margin-top:20px;">RJ ‡§™‡§æ‡§™‡§°‡§º ‡§≤‡•â‡§Ø‡§≤‡•ç‡§ü‡•Ä ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!</p>
  <button id="btnLogout" class="btn-secondary" style="max-width:200px;margin-top:15px;">Logout</button>
</div>

<script>
/* CONFIGURATION */
const SHEET_WEBHOOK_URL = "YOUR_SCRIPT_URL_HERE"; // your Google Script Web App URL
const SHEET_SECRET = "rj_secret_2025_xyz"; // same as in Apps Script

/* ELEMENT SHORTCUTS */
const regP = document.getElementById("registerPage");
const logP = document.getElementById("loginPage");
const logoP = document.getElementById("logoPage");
const mainP = document.getElementById("mainPage");

const btnRegister = document.getElementById("btnRegister");
const btnLogin = document.getElementById("btnLogin");
const btnNext = document.getElementById("btnNext");
const btnLogout = document.getElementById("btnLogout");
const regError = document.getElementById("regError");
const loginError = document.getElementById("loginError");

/* LOCAL STORAGE KEYS */
const KEY_REG_MOB = "rj_mobile";
const KEY_REG_NAME = "rj_name";
const KEY_SESSION = "rj_session";

/* STEP 1 ‚Üí REGISTER */
btnRegister.addEventListener("click", async ()=>{
  const name = document.getElementById("regName").value.trim();
  const mobile = document.getElementById("regMobile").value.trim();
  if(!/^[0-9]{10}$/.test(mobile)){
    regError.textContent = "‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç";
    return;
  }
  localStorage.setItem(KEY_REG_NAME, name);
  localStorage.setItem(KEY_REG_MOB, mobile);
  localStorage.setItem(KEY_SESSION, "false");
  regError.textContent = "";
  await saveToSheet("register", mobile, name);
  regP.style.display="none";
  logP.style.display="flex";
});

/* STEP 2 ‚Üí LOGIN */
btnLogin.addEventListener("click", ()=>{
  const entered = document.getElementById("loginMobile").value.trim();
  const saved = localStorage.getItem(KEY_REG_MOB);
  if(!/^[0-9]{10}$/.test(entered)){
    loginError.textContent = "‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç";
    return;
  }
  if(entered !== saved){
    loginError.textContent = "‡§Ø‡§π ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à";
    return;
  }
  localStorage.setItem(KEY_SESSION, "true");
  loginError.textContent = "";
  logP.style.display="none";
  logoP.style.display="flex";
});

/* STEP 3 ‚Üí LOGO BUTTON */
btnNext.addEventListener("click", ()=>{
  logoP.style.display="none";
  mainP.style.display="block";
});

/* STEP 4 ‚Üí LOGOUT */
btnLogout.addEventListener("click", ()=>{
  localStorage.setItem(KEY_SESSION,"false");
  mainP.style.display="none";
  logP.style.display="flex";
});

/* ALWAYS SHOW REGISTER FIRST ON LOAD */
window.onload = function(){
  regP.style.display="flex";
  logP.style.display="none";
  logoP.style.display="none";
  mainP.style.display="none";
};

/* SAVE TO GOOGLE SHEET */
async function saveToSheet(action,mobile,name){
  if(!SHEET_WEBHOOK_URL.startsWith("http")) return;
  try{
    await fetch(SHEET_WEBHOOK_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({secret:SHEET_SECRET,action,user_mobile:mobile,user_name:name,language:"hi"})
    });
  }catch(e){console.log(e);}
}
</script>
</body>
</html>
