<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RJ рдкрд╛рдкрдбрд╝ тАФ Register тЖТ Logo тЖТ Language тЖТ Inner</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{height:100%;width:100%;font-family:'Noto Sans Devanagari',sans-serif;background:#fff8e1;color:#222;overflow-x:hidden}
  .center{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:12px}
  .card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);max-width:420px;width:100%}
  input, textarea{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:6px;font-size:15px}
  button{background:#ffc107;border:none;padding:10px 16px;border-radius:8px;font-weight:700;cursor:pointer;width:100%}
  button.secondary{background:#eee;color:#111;width:auto;padding:8px 12px;margin-top:8px}
  button:hover{opacity:0.98}
  h1{color:#c47f00;margin-bottom:10px}
  .banner{width:100%;margin:10px 0;border-radius:0;display:block}
  #notify{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);background:#4CAF50;color:#fff;padding:10px 18px;border-radius:30px;font-weight:600;transition:all 0.45s ease;z-index:9999}
  #notify.show{bottom:20px}
  .topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;background:rgba(255,255,255,0.9);position:sticky;top:0;box-shadow:0 1px 6px rgba(0,0,0,0.06);z-index:20}
  .logout-btn{background:#f44336;color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  .logout-btn:hover{opacity:0.95}
  footer{text-align:center;color:#666;margin:18px 0;font-size:13px}
  .langBar { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; justify-content:center; }
  .langBtn { background:#ffc107; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700; }
  .logoBox { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px; height:60vh; }
  .logoBox img { width:65vw; max-width:260px; height:auto; border-radius:10px; }
  @media(max-width:520px){ .logoBox img { width:80vw; } }
</style>
</head>
<body>

<div id="notify">тЬЕ</div>

<!-- REGISTER PAGE -->
<div id="registerPage" class="center" style="display:none;">
  <div class="card">
    <h1>рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ</h1>
    <input id="regName" type="text" placeholder="рдирд╛рдо / Name">
    <input id="regMobile" type="tel" placeholder="рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ / Mobile Number">
    <button id="regSaveBtn">ЁЯТ╛ рд╕реЗрд╡ рдХрд░реЗрдВ</button>
    <button class="secondary" id="goToLoginBtn" style="display:none;">рдореИрдВ рдкрд╣рд▓реЗ рд╕реЗ рд░рдЬрд┐рд╕реНрдЯрд░ рд╣реВрдБ (Login)</button>
  </div>
</div>

<!-- LOGIN PAGE (also accepts 'admin') -->
<div id="loginPage" class="center" style="display:none;">
  <div class="card">
    <h1>рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ</h1>
    <input id="loginMobile" type="text" placeholder="рдЕрдкрдирд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ рдпрд╛ 'admin' рд▓рд┐рдЦреЗрдВ">
    <button id="loginBtn">ЁЯФУ рд▓реЙрдЧрд┐рди</button>
    <button class="secondary" id="goToRegisterBtn">рдирдпрд╛ рдпреВрдЬрд╝рд░? рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ</button>
  </div>
</div>

<!-- SPLASH LOGO (shows after register OR when returning user opens site) -->
<div id="logoArea" class="center" style="display:none; height:75vh; padding:20px;">
  <div class="logoBox">
    <img id="splashLogo" src="https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_0000000040986208ae9fdd85a3a3cbc8.png" alt="RJ Logo">
    <div style="text-align:center; font-weight:600; color:#333">рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ / Choose Language</div>
    <div class="langBar">
      <button class="langBtn" onclick="chooseLang('hi')">рд╣рд┐рдВрджреА</button>
      <button class="langBtn" onclick="chooseLang('en')">English</button>
      <button class="langBtn" onclick="chooseLang('gu')">ркЧрлБркЬрк░рк╛ркдрлА</button>
    </div>
  </div>
</div>

<!-- MAIN SITE -->
<div id="mainSite" style="display:none;">
  <div class="topbar">
    <div id="welcomeText">Welcome</div>
    <div>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </div>

  <div style="max-width:980px;margin:12px auto;padding:12px;">
    <img id="topBanner" class="banner" src="" alt="Top Banner">
    <h1 id="titleText" style="text-align:center;color:#c47f00">RJ рдкрд╛рдкрдбрд╝ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!</h1>

    <div style="background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.04);margin:12px 0;">
      <p><strong>рд░рдЬрд┐рд╕реНрдЯрд░ рдирд╛рдо:</strong> <span id="showName">тАФ</span></p>
      <p><strong>рд░рдЬрд┐рд╕реНрдЯрд░ рдореЛрдмрд╛рдЗрд▓:</strong> <span id="showMobile">тАФ</span></p>
    </div>

    <img id="bottomBanner" class="banner" src="" alt="Bottom Banner">
  </div>
</div>

<!-- ADMIN PANEL (opened when user types 'admin' on login) -->
<div id="adminPanel" style="display:none;">
  <div style="max-width:980px;margin:20px auto;padding:12px;background:#fff;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.04)">
    <h2>Admin Panel (Unlocked)</h2>
    <div style="margin-bottom:12px;"><strong>Local Registered User:</strong><div id="adminSaved" style="margin-top:6px">тАФ</div></div>

    <div style="margin-bottom:12px;">
      <strong>Change Banners (local)</strong>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="adminTop" placeholder="Top banner URL">
        <input id="adminBottom" placeholder="Bottom banner URL">
        <button id="saveBannersBtn" style="background:#2196F3;color:#fff;border:none;padding:8px 10px;border-radius:8px">Save</button>
      </div>
    </div>

    <div style="display:flex;gap:8px;">
      <button id="resetStorageBtn" style="background:#f44336;color:#fff;border:none;padding:8px 10px;border-radius:8px">Reset Local Storage</button>
      <button id="closeAdmin" class="secondary">Close Admin</button>
    </div>
  </div>
</div>

<footer>┬й 2025 RJ рдкрд╛рдкрдбрд╝</footer>

<script>
/* Keys and defaults */
const STORAGE_KEY = "rjpapad_user_data_v1";
const BANNER_KEY = "rjpapad_banners_v1";
const SESSION_KEY = "rjpapad_session_v1";
const DEFAULT_TOP = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000de7861faafb1b8052e9bd122%20(1).png";
const DEFAULT_BOTTOM = "https://raw.githubusercontent.com/rjpapad111983-svg/Rjpapad-/refs/heads/main/file_00000000aac061fdacd52dbbf8a83410.png";

/* UI refs */
const registerPage = document.getElementById("registerPage");
const loginPage = document.getElementById("loginPage");
const logoArea = document.getElementById("logoArea");
const mainSite = document.getElementById("mainSite");
const adminPanel = document.getElementById("adminPanel");
const notify = document.getElementById("notify");

/* Helpers */
function showNotify(msg){ notify.textContent = msg; notify.classList.add("show"); setTimeout(()=>notify.classList.remove("show"),3000); }
function loadUser(){ try{ const r = localStorage.getItem(STORAGE_KEY); return r ? JSON.parse(r) : { name:null, mobile:null }; }catch{return {name:null,mobile:null}} }
function saveUser(u){ localStorage.setItem(STORAGE_KEY, JSON.stringify(u)); }
function loadBanners(){ try{ const r = localStorage.getItem(BANNER_KEY); return r ? JSON.parse(r) : { top: DEFAULT_TOP, bottom: DEFAULT_BOTTOM, title: "RJ рдкрд╛рдкрдбрд╝ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!" }; }catch{return { top: DEFAULT_TOP, bottom: DEFAULT_BOTTOM, title: "RJ рдкрд╛рдкрдбрд╝ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!" } } }
function saveBanners(b){ localStorage.setItem(BANNER_KEY, JSON.stringify(b)); }
function saveSession(m){ sessionStorage.setItem(SESSION_KEY, m); }
function clearSession(){ sessionStorage.removeItem(SESSION_KEY); }
function getSession(){ return sessionStorage.getItem(SESSION_KEY); }
function applyBanners(){ const b = loadBanners(); document.getElementById("topBanner").src = b.top; document.getElementById("bottomBanner").src = b.bottom; document.getElementById("titleText").textContent = b.title; }

/* Page flows:
   - New user (no saved) -> show registerPage
   - Registered user (saved) and no session -> show logoArea (so they choose language)
   - Session active -> openMain
*/
window.addEventListener("DOMContentLoaded", ()=>{
  const user = loadUser();
  const sess = getSession();

  if(sess && user && sess === user.mobile){
    openMain(user);
    return;
  }

  if(user && user.mobile){
    // registered but not logged in тАФ show splash logo first (user must pick language)
    showLogo();
    return;
  }

  // new user
  showRegister();
  applyBanners();
});

/* Show functions */
function showRegister(){
  registerPage.style.display = "flex";
  loginPage.style.display = "none";
  logoArea.style.display = "none";
  mainSite.style.display = "none";
  adminPanel.style.display = "none";
}
function showLogin(){
  registerPage.style.display = "none";
  loginPage.style.display = "flex";
  logoArea.style.display = "none";
  mainSite.style.display = "none";
  adminPanel.style.display = "none";
}
function showLogo(){
  registerPage.style.display = "none";
  loginPage.style.display = "none";
  logoArea.style.display = "flex";
  mainSite.style.display = "none";
  adminPanel.style.display = "none";
}
function openMain(user){
  registerPage.style.display = "none";
  loginPage.style.display = "none";
  logoArea.style.display = "none";
  mainSite.style.display = "block";
  adminPanel.style.display = "none";
  applyBanners();
  document.getElementById("showName").textContent = user.name || "тАФ";
  document.getElementById("showMobile").textContent = user.mobile || "тАФ";
  document.getElementById("welcomeText").textContent = `Logged in as ${user.mobile}`;
}
function showAdminPanel(){
  registerPage.style.display = "none";
  loginPage.style.display = "none";
  logoArea.style.display = "none";
  mainSite.style.display = "none";
  adminPanel.style.display = "block";
  const u = loadUser();
  document.getElementById("adminSaved").textContent = u && u.mobile ? `Name: ${u.name||"тАФ"}, Mobile: ${u.mobile}` : "рдХреЛрдИ рд╕реНрдерд╛рдиреАрдп рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди рдирд╣реАрдВ";
  const b = loadBanners();
  document.getElementById("adminTop").value = b.top || DEFAULT_TOP;
  document.getElementById("adminBottom").value = b.bottom || DEFAULT_BOTTOM;
}

/* Register action */
document.getElementById("regSaveBtn").addEventListener("click", ()=>{
  const name = document.getElementById("regName").value.trim();
  const mobile = document.getElementById("regMobile").value.trim();
  if(!mobile){ alert("рдХреГрдкрдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ"); return; }
  saveUser({ name, mobile });
  // after register, show splash logo (so language selection next)
  showNotify("тЬЕ рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди рд╕рдлрд▓! рдХреГрдкрдпрд╛ рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВред");
  showLogo();
});

/* Login button (has admin special case) */
document.getElementById("loginBtn").addEventListener("click", ()=>{
  const input = document.getElementById("loginMobile").value.trim();
  if(!input){ alert("рдХреГрдкрдпрд╛ рдореЛрдмрд╛рдЗрд▓ рдбрд╛рд▓реЗрдВ рдпрд╛ 'admin' рд▓рд┐рдЦреЗрдВ"); return; }
  if(input.toLowerCase() === "admin"){
    // open admin panel directly
    showNotify("ЁЯСС Admin access");
    showAdminPanel();
    return;
  }
  const user = loadUser();
  if(user && user.mobile === input){
    // set session and show splash (so user can choose language)
    saveSession(input);
    showNotify("тЬЕ рд▓реЙрдЧрд┐рди рд╕рдлрд▓! рдХреГрдкрдпрд╛ рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВред");
    showLogo();
    return;
  }
  alert("тЭМ рдпрд╣ рдирдВрдмрд░ рд░рдЬрд┐рд╕реНрдЯрд░ рдирд╣реАрдВ рд╣реИ рдпрд╛ рдЧрд▓рдд рд╣реИред");
});

/* Language choose from splash */
function chooseLang(lang){
  // get user (must be registered); if not registered, go to register
  const user = loadUser();
  if(!user || !user.mobile){
    showNotify("рдкрд╣рд▓реЗ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ");
    showRegister();
    return;
  }

  // ensure session exists (set if not)
  if(!getSession()){
    saveSession(user.mobile);
  }

  // set banners/titles per language
  const conf = {
    hi:{ title:"RJ рдкрд╛рдкрдбрд╝ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ!", top: DEFAULT_TOP, bottom: DEFAULT_BOTTOM },
    en:{ title:"Welcome to RJ Papad!", top: DEFAULT_BOTTOM, bottom: DEFAULT_TOP },
    gu:{ title:"RJ рккрк╛рккркб ркорк╛ркВ ркЖрккркирлБркВ рк╕рлНрк╡рк╛ркЧркд ркЫрлЗ!", top: DEFAULT_TOP, bottom: DEFAULT_BOTTOM }
  }[lang] || { title:"RJ рдкрд╛рдкрдбрд╝", top: DEFAULT_TOP, bottom: DEFAULT_BOTTOM };

  // save language-specific banners to local banner store (so admin can change later)
  saveBanners({ top: conf.top, bottom: conf.bottom, title: conf.title });

  // hide splash and open main
  logoArea.style.opacity = "0";
  setTimeout(()=>{ logoArea.style.display = "none"; }, 400);

  openMain(user);
}

/* Logout */
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  if(!confirm("рдХреНрдпрд╛ рдЖрдк рд▓реЙрдЧрдЖрдЙрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?")) return;
  clearSession();
  showNotify("ЁЯФУ рд▓реЙрдЧрдЖрдЙрдЯ рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛");
  setTimeout(()=>{ showLogin(); }, 600);
});

/* Admin actions from adminPanel */
document.getElementById("saveBannersBtn").addEventListener("click", ()=>{
  const top = document.getElementById("adminTop").value.trim() || DEFAULT_TOP;
  const bottom = document.getElementById("adminBottom").value.trim() || DEFAULT_BOTTOM;
  saveBanners({ top, bottom, title: document.getElementById("titleText").textContent || "RJ рдкрд╛рдкрдбрд╝" });
  applyBanners();
  showNotify("тЬЕ Banners saved (local).");
});
document.getElementById("resetStorageBtn").addEventListener("click", ()=>{
  if(!confirm("рд╕рд╛рд░реА local storage рд╣рдЯрд╛рдиреА рд╣реИ?")) return;
  localStorage.clear();
  sessionStorage.clear();
  showNotify("тЩ╗я╕П Local data cleared.");
  setTimeout(()=>{ showRegister(); }, 600);
});
document.getElementById("closeAdmin").addEventListener("click", ()=>{ showLogin(); });

/* On load ensure banners applied */
window.addEventListener("load", applyBanners);
</script>
</body>
</html>
