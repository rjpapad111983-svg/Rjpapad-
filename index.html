<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>लॉगिन · Login</title>
  <style>
    :root{
      --bg:#f5f7fb;
      --card:#ffffff;
      --accent:#2563eb;
      --muted:#6b7280;
      --success:#16a34a;
      --shadow: 0 6px 24px rgba(16,24,40,0.08);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 100%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#0f172a;
    }

    .container{
      width:100%;
      max-width:960px;
      display:grid;
      grid-template-columns:1fr 420px;
      gap:28px;
      align-items:center;
    }

    .hero{
      padding:28px;
      border-radius:14px;
      background:linear-gradient(180deg,#ffffffcc, #ffffff);
      box-shadow:var(--shadow);
      min-height:360px;
      display:flex;
      flex-direction:column;
      gap:12px;
      justify-content:center;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:56px;height:56px;border-radius:10px;
      display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),#7c3aed);
      color:white;font-weight:700;font-size:20px;
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted)}

    .card{
      background:var(--card);
      border-radius:12px;
      padding:24px;
      box-shadow:var(--shadow);
    }

    form{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:var(--muted);display:flex;flex-direction:column;gap:6px}
    input[type="text"],input[type="password"],input[type="email"]{
      padding:12px 14px;border-radius:8px;border:1px solid #e6e9ef;
      font-size:15px;outline:none;background:#fcfdff;
    }
    .actions{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:6px}
    button.primary{
      background:var(--accent);color:white;padding:10px 14px;border-radius:8px;border:0;font-weight:600;
      cursor:pointer;
    }
    button.ghost{background:transparent;border:0;color:var(--accent);cursor:pointer;font-weight:600}
    .muted{color:var(--muted);font-size:13px}

    .switch-link{background:transparent;border:0;color:var(--accent);cursor:pointer;text-decoration:underline;padding:0;font-size:13px}

    /* Dashboard */
    .dashboard{
      padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfdff);box-shadow:var(--shadow);
      min-height:360px;display:flex;flex-direction:column;gap:12px;
    }
    .topbar{display:flex;justify-content:space-between;align-items:center}
    .menu-btn{
      display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:10px;border:1px solid #eef2ff;background:white;cursor:pointer;
    }
    .menu-panel{
      margin-top:12px;padding:12px;border-radius:10px;border:1px dashed #e6eefc;background:#f8fbff;display:none;flex-direction:column;gap:10px;
    }
    .menu-item{display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;cursor:pointer;border:1px solid transparent}
    .menu-item:hover{background:#fff}
    .wallet-balance{font-size:24px;font-weight:700}
    .card-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}

    .notice{padding:10px;border-radius:8px;background:#fffdfa;border:1px solid #ffedd5;color:#92400e;font-size:13px}

    .hidden{display:none}

    footer{font-size:12px;color:var(--muted);margin-top:10px}
    @media (max-width:900px){
      .container{grid-template-columns:1fr;max-width:760px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="hero card">
      <div class="brand">
        <div class="logo">WP</div>
        <div>
          <h1>वेबसाइट • Website</h1>
          <p class="lead">Simple login/register — लॉगिन / रजिस्टर (क्लाइंट-साइड)</p>
        </div>
      </div>

      <div style="margin-top:18px;">
        <p class="muted">यह इंटरफ़ेस दो भाषाओं में लेबल दिखाता है — हिन्दी और English. कोई सर्वर रिक्वायर नहीं है; फाइल को ब्राउज़र में खोलिये।</p>
      </div>

      <div style="margin-top:auto;font-size:13px;color:var(--muted)">
        <div>निर्देश: लॉगिन पेज पर यूज़र नाम और पासवर्ड डालें। रजिस्टर करने के लिए "रजिस्टर / Register" पर क्लिक करें।</div>
      </div>
    </div>

    <div id="authCard" class="card">
      <!-- LOGIN VIEW -->
      <div id="loginView">
        <h2 style="margin:0 0 6px 0">लॉगिन • Login</h2>
        <form id="loginForm">
          <label>
            उपयोगकर्ता नाम • Username
            <input id="loginUsername" type="text" placeholder="उदा. ram • e.g. ram" required />
          </label>
          <label>
            पासवर्ड • Password
            <input id="loginPassword" type="password" placeholder="******" required />
          </label>

          <div class="actions">
            <button type="submit" class="primary">लॉगिन • Login</button>
            <button type="button" class="ghost" id="goRegister">रजिस्टर करें • Register</button>
          </div>
          <div id="loginMsg" class="muted" style="margin-top:6px"></div>
        </form>
      </div>

      <!-- REGISTER VIEW -->
      <div id="registerView" class="hidden">
        <h2 style="margin:0 0 6px 0">रजिस्टर • Register</h2>
        <form id="registerForm">
          <label>
            पूरा नाम • Full name
            <input id="regName" type="text" placeholder="उदा. राम कुमार • e.g. Ram Kumar" required />
          </label>
          <label>
            उपयोगकर्ता नाम • Username
            <input id="regUsername" type="text" placeholder="उदा. ram123 • e.g. ram123" required />
          </label>
          <label>
            ईमेल • Email (वैकल्पिक)
            <input id="regEmail" type="email" placeholder="name@example.com" />
          </label>
          <label>
            पासवर्ड • Password
            <input id="regPassword" type="password" placeholder="कम से कम 6 अक्षर" required />
          </label>

          <div class="actions">
            <button type="submit" class="primary">रजिस्टर • Register</button>
            <button type="button" class="ghost" id="goLogin">लॉगिन पेज पर जाएं • Go to Login</button>
          </div>
          <div id="regMsg" class="muted" style="margin-top:6px"></div>
        </form>
      </div>

      <!-- DASHBOARD (चुपके से छुपा) -->
      <div id="dashboardView" class="hidden">
        <div class="dashboard">
          <div class="topbar">
            <div>
              <div style="font-size:14px;color:var(--muted)">स्वागत • Welcome</div>
              <div id="userGreeting" style="font-weight:700;font-size:18px">User</div>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <button id="menuBtn" class="menu-btn" title="Menu">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 12h18M3 6h18M3 18h18" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round"/></svg>
                <div style="font-weight:600;font-size:14px">मेनू • Menu</div>
              </button>
              <button id="logoutBtn" class="ghost">लॉगआउट • Logout</button>
            </div>
          </div>

          <div id="menuPanel" class="menu-panel" role="menu" aria-hidden="true">
            <div class="menu-item" id="menuWallet">
              <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden><path d="M3 7h14v10H3z" stroke="#0f172a" stroke-width="1.2" fill="none"/></svg>
              <div>
                <div style="font-weight:600">Loyalty Wallet</div>
                <div style="font-size:13px;color:var(--muted)">लॉयल्टी वॉलेट • Wallet balance & points</div>
              </div>
            </div>
            <div class="menu-item" id="menuMLM">
              <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden><path d="M12 3v6M5 21v-4a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v4" stroke="#0f172a" stroke-width="1.2" fill="none"/></svg>
              <div>
                <div style="font-weight:600">MLM Tree</div>
                <div style="font-size:13px;color:var(--muted)">एमएलएम ट्री • Network hierarchy</div>
              </div>
            </div>
          </div>

          <div id="mainPanel">
            <div class="card-grid">
              <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center">
                  <div>
                    <div style="font-size:13px;color:var(--muted)">बैलेंस • Balance</div>
                    <div class="wallet-balance" id="walletBalance">₹ 0</div>
                  </div>
                  <div style="text-align:right">
                    <div style="font-size:13px;color:var(--muted)">रिवार्ड्स • Rewards</div>
                    <div style="font-weight:700">0 pts</div>
                  </div>
                </div>
              </div>

              <div class="card">
                <div style="font-size:13px;color:var(--muted)">प्रोफ़ाइल • Profile</div>
                <div style="margin-top:8px;font-weight:700" id="profileName">Name</div>
                <div style="margin-top:6px;color:var(--muted)" id="profileEmail">email@example.com</div>
              </div>
            </div>

            <div style="margin-top:12px" id="panelContent">
              <div class="notice">मेनू से 'Loyalty Wallet' या 'MLM Tree' चुनें — Choose "Loyalty Wallet" or "MLM Tree" from the menu.</div>
            </div>
          </div>

          <footer>© वेबसाइट • Website — 2025</footer>
        </div>
      </div>

    </div>
  </div>

<script>
  // Simple client-side user store using localStorage
  const LS_KEY = 'site_users_v1';
  function loadUsers(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      return raw ? JSON.parse(raw) : [];
    } catch(e){ return []; }
  }
  function saveUsers(users){
    localStorage.setItem(LS_KEY, JSON.stringify(users));
  }

  // Helpers
  const $ = id => document.getElementById(id);
  const loginView = $('loginView'), registerView = $('registerView'), dashboardView = $('dashboardView');
  const loginMsg = $('loginMsg'), regMsg = $('regMsg');
  const users = loadUsers();

  // Navigation buttons
  $('goRegister').addEventListener('click', ()=> {
    loginView.classList.add('hidden');
    registerView.classList.remove('hidden');
    regMsg.textContent = '';
  });
  $('goLogin').addEventListener('click', ()=> {
    registerView.classList.add('hidden');
    loginView.classList.remove('hidden');
    loginMsg.textContent = '';
  });

  // Registration
  $('registerForm').addEventListener('submit', (e)=> {
    e.preventDefault();
    const name = $('regName').value.trim();
    const username = $('regUsername').value.trim().toLowerCase();
    const email = $('regEmail').value.trim();
    const password = $('regPassword').value;

    if(username.length < 3){ regMsg.textContent = 'उपयोगकर्ता नाम कम से कम 3 अक्षर होना चाहिए • username min 3 chars'; return; }
    if(password.length < 6){ regMsg.textContent = 'पासवर्ड कम से कम 6 अक्षर होना चाहिए • password min 6 chars'; return; }

    const existing = loadUsers().find(u=>u.username === username || (u.email && u.email === email));
    if(existing){ regMsg.textContent = 'यह उपयोगकर्ता नाम या ईमेल पहले से मौजूद है • username/email already taken'; return; }

    const newUser = {
      id: Date.now(),
      name, username, email,
      // NOTE: इस उदाहरण में पासवर्ड plaintext में रखा जा रहा है — production में ऐसा न करें।
      password,
      wallet: { balance: 0, points: 0 },
      createdAt: new Date().toISOString()
    };
    const all = loadUsers();
    all.push(newUser);
    saveUsers(all);

    regMsg.textContent = 'रजिस्ट्रेशन पूरा हुआ — अब आप लॉगिन कर सकते हैं • Registered. Please login.';
    // switch to login after short delay
    setTimeout(()=>{
      registerView.classList.add('hidden');
      loginView.classList.remove('hidden');
      regMsg.textContent = '';
      $('registerForm').reset();
    }, 800);
  });

  // Login
  $('loginForm').addEventListener('submit', (e)=> {
    e.preventDefault();
    const username = $('loginUsername').value.trim().toLowerCase();
    const password = $('loginPassword').value;

    const existing = loadUsers().find(u=>u.username === username);
    if(!existing){ loginMsg.textContent = 'उपयोगकर्ता नहीं मिला • user not found'; return; }
    if(existing.password !== password){ loginMsg.textContent = 'गलत पासवर्ड • incorrect password'; return; }

    // Successful login
    loginMsg.textContent = '';
    showDashboard(existing);
    $('loginForm').reset();
  });

  function showDashboard(user){
    loginView.classList.add('hidden');
    registerView.classList.add('hidden');
    dashboardView.classList.remove('hidden');

    $('userGreeting').textContent = (user.name || user.username);
    $('profileName').textContent = (user.name || user.username);
    $('profileEmail').textContent = (user.email || '—');
    $('walletBalance').textContent = `₹ ${user.wallet.balance || 0}`;
    // store current session (simple)
    sessionStorage.setItem('site_current_user', JSON.stringify({id:user.id,username:user.username}));
  }

  // Logout
  $('logoutBtn').addEventListener('click', ()=>{
    sessionStorage.removeItem('site_current_user');
    dashboardView.classList.add('hidden');
    loginView.classList.remove('hidden');
  });

  // Menu toggle and items
  const menuBtn = $('menuBtn'), menuPanel = $('menuPanel');
  menuBtn.addEventListener('click', ()=>{
    const vis = menuPanel.style.display === 'flex';
    menuPanel.style.display = vis ? 'none' : 'flex';
    menuPanel.setAttribute('aria-hidden', vis ? 'true' : 'false');
  });

  $('menuWallet').addEventListener('click', ()=> {
    const cur = sessionStorage.getItem('site_current_user');
    if(!cur){ alert('कृपया पहले लॉगिन करें • please login first'); return; }
    const cu = JSON.parse(cur);
    const user = loadUsers().find(u=>u.id===cu.id);
    $('panelContent').innerHTML = `
      <div class="card">
        <div style="font-weight:700">Loyalty Wallet • लॉयल्टी वॉलेट</div>
        <div style="margin-top:8px;color:var(--muted)">बैलेंस • Balance</div>
        <div style="font-size:22px;font-weight:800;margin-top:6px">₹ ${user.wallet.balance || 0}</div>
        <div style="margin-top:10px;color:var(--muted)">Points: ${user.wallet.points || 0} pts</div>
        <div style="margin-top:12px"><button id="addFunds" class="primary">Add ₹100 • ₹100 जोड़ें</button></div>
      </div>
    `;
    // attach listener for addFunds
    setTimeout(()=>{ // next tick
      const btn = document.getElementById('addFunds');
      if(btn){
        btn.addEventListener('click', ()=>{
          user.wallet.balance = (user.wallet.balance || 0) + 100;
          user.wallet.points = (user.wallet.points || 0) + 10;
          const all = loadUsers().map(u=> u.id===user.id ? user : u);
          saveUsers(all);
          $('walletBalance').textContent = `₹ ${user.wallet.balance}`;
          // refresh panel
          $('menuWallet').click(); // close
          $('menuWallet').click(); // open (quick refresh)
          alert('₹100 जोड़ दिए गए • ₹100 added to balance');
        });
      }
    },50);
  });

  $('menuMLM').addEventListener('click', ()=> {
    const cur = sessionStorage.getItem('site_current_user');
    if(!cur){ alert('कृपया पहले लॉगिन करें • please login first'); return; }
    // Simple placeholder MLM tree
    $('panelContent').innerHTML = `
      <div class="card">
        <div style="font-weight:700">MLM Tree • एमएलएम ट्री</div>
        <div style="margin-top:8px;color:var(--muted)">नीचे आपका सिम्पल नेटवर्क दिखेगा • Simple network view below</div>
        <pre style="margin-top:12px;background:#fbfdff;padding:12px;border-radius:8px;border:1px solid #eef6ff">You (You)
├─ Partner A
│  ├─ Member A1
│  └─ Member A2
└─ Partner B
   └─ Member B1
        </pre>
      </div>
    `;
  });

  // If session exists, auto open dashboard
  (function initFromSession(){
    const cur = sessionStorage.getItem('site_current_user');
    if(cur){
      const cu = JSON.parse(cur);
      const user = loadUsers().find(u=>u.id===cu.id);
      if(user) showDashboard(user);
      else sessionStorage.removeItem('site_current_user');
    }
  })();
</script>
</body>
</html>
